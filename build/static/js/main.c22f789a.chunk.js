(this.webpackJsonpmaterialpro=this.webpackJsonpmaterialpro||[]).push([[0],[,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c}));var r=n(5);function s(){const e=r.a.currentUserValue;return e&&e.token?{Authorization:"Bearer ".concat(e.token)}:{}}function a(){let e=[{id:1,username:"test",password:"test",firstName:"Test",lastName:"User"}],t=window.fetch;window.fetch=function(n,r){const s="Bearer fake-jwt-token"===r.headers.Authorization;return new Promise((a,o)=>{setTimeout(()=>{if(n.endsWith("/users/authenticate")&&"POST"===r.method){const t=JSON.parse(r.body),n=e.find(e=>e.username===t.username&&e.password===t.password);return n?i({id:n.id,username:n.username,firstName:n.firstName,lastName:n.lastName,token:"fake-jwt-token"}):(o="Username or password is incorrect",void a({status:400,text:()=>Promise.resolve(JSON.stringify({message:o}))}))}var o;if(n.endsWith("/users")&&"GET"===r.method)return s?i(e):void a({status:401,text:()=>Promise.resolve(JSON.stringify({message:"Unauthorised"}))});function i(e){a({ok:!0,text:()=>Promise.resolve(JSON.stringify(e))})}t(n,r).then(e=>a(e))},500)})}}function o(e){return e.text().then(t=>{const n=t&&JSON.parse(t);if(!e.ok){-1!==[401,403].indexOf(e.status)&&(r.a.logout(),window.location.reload(!0));const t=n&&n.message||e.statusText;return Promise.reject(t)}return n})}var i=n(7);const c=Object(i.a)({basename:"/"})},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(20),s=n(3);const a=new r.a(JSON.parse(localStorage.getItem("currentUser"))),o={login:function(e,t){const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})};return fetch("/users/authenticate",n).then(s.c).then(e=>(localStorage.setItem("currentUser",JSON.stringify(e)),a.next(e),e))},logout:function(){localStorage.removeItem("currentUser"),a.next(null)},currentUser:a.asObservable(),get currentUserValue(){return a.value}}},,,,function(e,t,n){"use strict";var r=n(1),s=n.n(r);n(17);t.a=()=>s.a.createElement("div",{className:"fallback-spinner"},s.a.createElement("div",{className:"loading component-loader"},s.a.createElement("div",{className:"effect-1 effects"}),s.a.createElement("div",{className:"effect-2 effects"}),s.a.createElement("div",{className:"effect-3 effects"})))},function(e,t,n){e.exports=n(11)},function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),a=n(6),o=n.n(a),i=(n(16),n(9)),c=n(3);Object(c.b)();const u=Object(r.lazy)(()=>new Promise(e=>{setTimeout(()=>e(Promise.all([n.e(3),n.e(4)]).then(n.bind(null,18))),0)}));o.a.render(s.a.createElement(r.Suspense,{fallback:s.a.createElement(i.a,null)},s.a.createElement(u,null)),document.getElementById("root"))},,,,,function(e,t,n){},function(e,t,n){}],[[10,1,5]]]);
//# sourceMappingURL=main.c22f789a.chunk.js.map